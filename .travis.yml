language: php

sudo: required

services:
  - docker

php:
  - 7.1

before_script:
  - cp app.travis.yml app.yml
  - composer self-update
  - composer install --no-interaction
  - docker-compose up -d
  - docker exec -it arangodb echo 'db._createDatabase("dbname");' |  arangosh --server.username root --server.password YourRootPassword

script:
  - docker exec -it apache vendor/bin/phpunit tests/